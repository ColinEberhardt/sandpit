"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _dat=require("dat.gui/build/dat.gui");var _dat2=_interopRequireDefault(_dat);var _queryfetch=require("queryfetch");var _queryfetch2=_interopRequireDefault(_queryfetch);var _debounce=require("debounce");var _debounce2=_interopRequireDefault(_debounce);var _seedrandom=require("seedrandom");var _seedrandom2=_interopRequireDefault(_seedrandom);var _logger=require("./utils/logger");var _logger2=_interopRequireDefault(_logger);var _is=require("./utils/is");var _is2=_interopRequireDefault(_is);require("whatwg-fetch");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Sandpit=function(){_createClass(Sandpit,null,[{key:"CANVAS",get:function get(){return"2d"}},{key:"WEBGL",get:function get(){return"3d"}}]);function Sandpit(container,type){_classCallCheck(this,Sandpit);console.log("â›± Welcome to Sandpit");this._setupContext(container,type)}_createClass(Sandpit,[{key:"_setupContext",value:function _setupContext(container,type){if(typeof container!=="string"&&(typeof container==="undefined"?"undefined":_typeof(container))!=="object"){throw new Error('Please provide a string or object reference to the container, like ".container", or ')}if(typeof type!=="string"||type!==Sandpit.CANVAS&&type!==Sandpit.WEBGL){throw new Error("Please provide a context type - either `Sandpit.CANVAS` or `Sandpit.WEBGL`")}var _container=void 0;if(typeof container==="string"){_container=document.querySelector(container)}else if((typeof container==="undefined"?"undefined":_typeof(container))==="object"){_container=container}if(_is2.default.element(_container)){this._canvas=document.createElement("canvas");this._canvas.width=window.innerWidth;this._canvas.height=window.innerHeight;_container.appendChild(this._canvas);this._context=this._canvas.getContext(type);this._type=type}else{throw new Error("The container is not a HTMLElement")}}},{key:"_setupSettings",value:function _setupSettings(){var _this=this;this.setting={};this._gui=new _dat2.default.GUI;if(this._queryable){if(window.location.search){(function(){var params=_queryfetch2.default.parse(window.location.search);Object.keys(params).forEach(function(key){if(_this.defaults[key]){var param=params[key];if(param==="true")param=true;if(param==="false")param=false;else if(_typeof(_this.defaults[key].value)!=="object"){if(!_this.defaults[key].sticky){_this.defaults[key].value=param}}else{if(!_this.defaults[key].sticky){_this.defaults[key].selected=param}else{_this.defaults[key].selected=_this.defaults[key].value[Object.keys(_this.defaults[key].value)[0]]}}}})})()}}var group=this._gui.addFolder("Settings");Object.keys(this.defaults).forEach(function(name){var options=false;var value=_this.defaults[name].value;if((typeof value==="undefined"?"undefined":_typeof(value))==="object"){options=value;if(_this.defaults[name].selected){_this.settings[name]=_this.defaults[name].selected}else{_this.settings[name]=_is2.default.array(value)?value[0]:value[Object.keys(value)[0]]}}else{_this.settings[name]=_this.defaults[name].value}var guiField=_this.defaults[name].color?group.addColor(_this.settings,name):group.add(_this.settings,name,options);if(_this.defaults[name].min!==undefined)guiField=guiField.min(_this.defaults[name].min);if(_this.defaults[name].max!==undefined)guiField=guiField.max(_this.defaults[name].max);if(_this.defaults[name].step!==undefined)guiField=guiField.step(_this.defaults[name].step);if(_this.defaults[name].editable===false){guiField.domElement.style.pointerEvents="none";guiField.domElement.style.opacity=.5}guiField.onChange((0,_debounce2.default)(function(value){_this._change(name,value)}),300)});group.open();if(this._queryable){var query=_queryfetch2.default.serialize(this.settings);window.history.pushState({},null,"/?"+query);this._gui.add({reset:function reset(){window.history.pushState({},null,"/");window.location.reload()}},"reset")}}},{key:"_change",value:function _change(name,value){_logger2.default.info("Update fired on "+name+": "+value);if(this._queryable){var query=_queryfetch2.default.serialize(this.settings);window.history.pushState({},null,"/?"+query)}if(this.change){this.change(name,value)}}},{key:"_setupLoop",value:function _setupLoop(){this._time=0;this._loop()}},{key:"_loop",value:function _loop(){if(this._autoClear){if(this._type===Sandpit.CANVAS){this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}else if(this._type===Sandpit.WEGBL){}}if(this.loop)this.loop();this._time++;this._animationFrame=window.requestAnimationFrame(this._loop.bind(this))}},{key:"_setupEvents",value:function _setupEvents(){var _this2=this;this._events={};this._setupResize();this._setupInput();Object.keys(this._events).forEach(function(event){_this2._events[event].context.addEventListener(event,_this2._events[event].event.bind(_this2),false)})}},{key:"_setupResize",value:function _setupResize(){var _this3=this;if(this.resize){this._resizeEvent=this.resize}else{this._resizeEvent=function(){_this3._canvas.width=window.innerWidth;_this3._canvas.height=window.innerHeight}}this._events["resize"]={event:this._resizeEvent,context:window}}},{key:"_setupMouse",value:function _setupMouse(){this._events["mousemove"]={event:this._handleMouseMove,context:document};this._events["mousedown"]={event:this._handleMouseDown,context:document};this._events["mouseenter"]={event:this._handleMouseEnter,context:document};this._events["mouseleave"]={event:this._handleMouseLeave,context:document};this._events["mouseup"]={event:this._handleMouseUp,context:document}}},{key:"_setupTouches",value:function _setupTouches(){this._events["touchmove"]={event:this._handleTouchMove,context:document};this._events["touchstart"]={event:this._handleTouchStart,context:document};this._events["touchend"]={event:this._handleTouchEnd,context:document}}},{key:"_setupAccelerometer",value:function _setupAccelerometer(){if(this.accelerometer){if(window.DeviceOrientationEvent){this._events["deviceorientation"]={event:this._handleAccelerometer,context:document}}else{_logger2.default.warn("Accelerometer is not supported by this device")}}}},{key:"_setupInput",value:function _setupInput(){this.input={};this._setupMouse();this._setupTouches();this._setupAccelerometer()}},{key:"_handleMouseMove",value:function _handleMouseMove(event){this.input.x=event.pageX;this.input.y=event.pageY;if(this.move)this.move(event)}},{key:"_handleMouseDown",value:function _handleMouseDown(event){this.input.x=event.pageX;this.input.y=event.pageY;if(this.touch)this.touch(event)}},{key:"_handleMouseUp",value:function _handleMouseUp(event){delete this.input.x;delete this.input.y;if(this.release)this.release(event)}},{key:"_handleMouseEnter",value:function _handleMouseEnter(event){this.input.x=event.pageX;this.input.y=event.pageY;if(this.release)this.release(event)}},{key:"_handleMouseLeave",value:function _handleMouseLeave(event){delete this.input.x;delete this.input.y;if(this.release)this.release(event)}},{key:"_handleTouchMove",value:function _handleTouchMove(event){this.input.x=event.pageX;this.input.y=event.pageY;if(this.move)this.move(event)}},{key:"_handleTouchStart",value:function _handleTouchStart(event){this.input.x=event.pageX;this.input.y=event.pageY;if(this.touch)this.touch(event)}},{key:"_handleTouchEnd",value:function _handleTouchEnd(event){delete this.input.x;delete this.input.y;if(this.release)this.release(event)}},{key:"_handleAccelerometer",value:function _handleAccelerometer(event){if(this.accelerometer)this.accelerometer(event)}},{key:"settings",value:function settings(_settings){var queryable=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.defaults=_settings;this._queryable=queryable}},{key:"debug",value:function debug(boolean){_logger2.default.active=boolean}},{key:"autoClear",value:function autoClear(boolean){this._autoClear=boolean}},{key:"clear",value:function clear(){if(this._type===Sandpit.CANVAS){this._context.clearRect(0,0,this.width(),this.height())}else if(this._type===Sandpit.WEGBL){}}},{key:"context",value:function context(){return this._context}},{key:"canvas",value:function canvas(){return this._canvas}},{key:"time",value:function time(){return this._time}},{key:"width",value:function width(){return this._canvas.width}},{key:"height",value:function height(){return this._canvas.height}},{key:"fill",value:function fill(color){if(this._type===Sandpit.CANVAS){this._context.fillStyle=color;this._context.fillRect(0,0,this.width(),this.height())}else if(this._type===Sandpit.WEGBL){}}},{key:"get",value:function get(url){return new Promise(function(resolve,reject){fetch(url).then(function(response){resolve(response.text())}).catch(function(error){_logger2.default.info("Get fail",error);reject()})})}},{key:"random",value:function random(seed){return(0,_seedrandom2.default)(seed)}},{key:"start",value:function start(){if(this.defaults&&Object.keys(this.defaults).length)this._setupSettings();this._setupEvents();if(this.setup)this.setup();if(!this.loop)_logger2.default.warn("Looks like you need to define a loop");this._setupLoop()}},{key:"stop",value:function stop(){var _this4=this;if(this.canvas()){this.canvas().outerHTML="";delete this.canvas()}if(this._gui)this._gui.destroy();window.cancelAnimationFrame(this._animationFrame);Object.keys(this._events).forEach(function(event){document.removeEventListener(event,_this4._events[event].event)})}}]);return Sandpit}();exports.default=Sandpit;"use strict";it("thinks Charlie is great",function(){expect(true)});"use strict";Object.defineProperty(exports,"__esModule",{value:true});require("whatwg-fetch");var _Sandpit=require("../Sandpit");var _Sandpit2=_interopRequireDefault(_Sandpit);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var dataAPI="http://www.setgetgo.com/randomword/get.php";var playground=function playground(){var sandpit=new _Sandpit2.default(document.querySelector("#root"),_Sandpit2.default.CANVAS);sandpit.autoClear(false);sandpit.settings({demo:{value:"data",editable:false,sticky:true}});var ctx=sandpit.context();var loading=true;sandpit.setup=function(){sandpit.get(dataAPI).then(function(response){loading=false;sandpit.clear();ctx.fillStyle="#000";ctx.textAlign="center";ctx.font="48px sans-serif";ctx.fillText(response,sandpit.width()/2,sandpit.height()/2);ctx.font="16px sans-serif";ctx.fillText("WORD OF THE DAY".split("").join(String.fromCharCode(8202)),sandpit.width()/2,sandpit.height()/2-50)})};sandpit.loop=function(){if(loading){ctx.beginPath();ctx.arc(sandpit.width()/2+Math.sin(sandpit.time()/Math.PI)*15-1,sandpit.height()/2+Math.cos(sandpit.time()/Math.PI)*15-1,2,0,2*Math.PI);ctx.fillStyle="#000";ctx.fill();ctx.fillStyle="rgba(255, 255, 255, 0.25)";ctx.fillRect(0,0,sandpit.width(),sandpit.height())}};sandpit.start();playground.prototype.sandpit=sandpit};exports.default=playground;"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _particles=require("./particles");var _particles2=_interopRequireDefault(_particles);var _threedee=require("./threedee");var _threedee2=_interopRequireDefault(_threedee);var _data=require("./data");var _data2=_interopRequireDefault(_data);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.default={particles:_particles2.default,threedee:_threedee2.default,data:_data2.default};"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _Sandpit=require("../Sandpit");var _Sandpit2=_interopRequireDefault(_Sandpit);var _vector=require("../utils/vector");var _vector2=_interopRequireDefault(_vector);var _color=require("../utils/color");var _color2=_interopRequireDefault(_color);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var sandpit=void 0;var playground=function playground(){sandpit=new _Sandpit2.default(document.querySelector("#root"),_Sandpit2.default.CANVAS);sandpit.settings({demo:{value:"particles",editable:false,sticky:true},follow:{value:false},gravity:{value:2,step:.1,min:.1,max:5},count:{value:50,step:1,min:1,max:500},size:{value:20,step:1,min:1,max:50},color:{value:"#000",color:true},strokeWidth:{value:1,min:1,max:10,step:1},background:{value:{white:"hsl(0, 100%, 100%)",aqua:"hsl(175, 100%, 45%)",blue:"hsl(185, 69%, 63%)",orange:"hsl(39, 100%, 54%)",pink:"hsl(333, 100%, 68%)",green:"hsl(84, 100%, 68%)",violet:"hsl(270, 100%, 80%)"}},keepDrawing:{value:false}},true);var ctx=sandpit.context();var random=sandpit.random("Hello!");function Particle(){var shadowBlur=Math.ceil(random()*3);var strokeWidth=sandpit.settings.strokeWidth;var strokeStyle=(0,_color2.default)(sandpit.settings.color).alpha(random()*.5);var initX=random()*sandpit.width();var initY=random()*sandpit.height();var position=new _vector2.default(initX,initY);var velocity=new _vector2.default(0,0);var acceleration=new _vector2.default(0,0);var attraction=new _vector2.default(0,0);var previousPositions=[];this.update=function(){var force=new _vector2.default(Math.cos(random()*Math.PI*2),Math.sin(random()*Math.PI*2));acceleration.add(new _vector2.default(1+random()*.9,1+random()*.9).multiply(force));var dx=position.x-sandpit.width()/2;var dy=position.y-sandpit.height()/2;var fSpring=new _vector2.default(dx,dy).multiplyScalar(-1/(Math.min(sandpit.width(),sandpit.height())*(sandpit.defaults.gravity.max-sandpit.settings.gravity+.1)));acceleration.add(fSpring);if(sandpit.settings.follow){if(sandpit.input.x&&sandpit.input.y){var mx=sandpit.input.x-position.x;var my=sandpit.input.y-position.y;var distance=Math.sqrt(mx*mx+my*my);attraction.add(new _vector2.default(mx/distance,my/distance).multiplyScalar(1))}}velocity.add(acceleration);velocity.add(attraction);velocity.limit(10,.9);position.add(velocity);acceleration.multiply(new _vector2.default(0,0));attraction.multiply(new _vector2.default(0,0));ctx.beginPath();ctx.lineWidth=strokeWidth;ctx.strokeStyle=strokeStyle;ctx.shadowBlur=shadowBlur;ctx.shadowColor=sandpit.settings.color;if(previousPositions.length>1){var first=previousPositions[0],rest=previousPositions.slice(1);ctx.moveTo(first.x,first.y);rest.forEach(function(p){return ctx.lineTo(p.x,p.y)});ctx.lineTo(position.x,position.y);if(previousPositions.length>=sandpit.settings.size&&!sandpit.settings.keepDrawing)previousPositions.shift()}previousPositions.push(position.clone());ctx.stroke()}}var particles=[];sandpit.change=function(){particles=Array(Math.round(sandpit.settings.count)).fill().map(function(){return new Particle})};sandpit.loop=function(){sandpit.fill(sandpit.settings.background);particles.forEach(function(particle){return particle.update()})};sandpit.start();sandpit.change();playground.prototype.sandpit=sandpit};exports.default=playground;"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _Sandpit=require("../Sandpit");var _Sandpit2=_interopRequireDefault(_Sandpit);var _three=require("three");var _threeTrackballcontrols=require("three-trackballcontrols");var _threeTrackballcontrols2=_interopRequireDefault(_threeTrackballcontrols);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var playground=function playground(){var sandpit=new _Sandpit2.default(document.querySelector("#root"),_Sandpit2.default.WEBGL);sandpit.settings({demo:{value:"threedee",editable:false,sticky:true},scale:{value:1,step:1,min:1,max:10}},true);var renderer=new _three.WebGLRenderer({canvas:sandpit.canvas(),antialias:true});renderer.setClearColor(16777215,1);renderer.setSize(sandpit.width(),sandpit.height());var camera=new _three.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1e4);camera.position.z=50;var scene=new _three.Scene;scene.add(camera);var controls=new _threeTrackballcontrols2.default(camera,renderer.domElement);var cube=new _three.Mesh(new _three.BoxGeometry(10,10,10),new _three.MeshBasicMaterial({wireframe:true,color:0}));scene.add(cube);sandpit.change=function(){cube.scale.set(sandpit.settings.scale,sandpit.settings.scale,sandpit.settings.scale)};sandpit.loop=function(){if(cube){cube.rotation.x+=.001;cube.rotation.y+=.001;cube.rotation.z+=.001}controls.update();renderer.render(scene,camera)};sandpit.start();sandpit.change();playground.prototype.sandpit=sandpit};exports.default=playground;"use strict";var _queryfetch=require("queryfetch");var _queryfetch2=_interopRequireDefault(_queryfetch);require("./index.css");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var demos=require("./demos/index").default;var playground=void 0;var div=document.createElement("div");div.classList.add("demos");Object.keys(demos).forEach(function(demo){var link=document.createElement("a");link.appendChild(document.createTextNode(demo));link.addEventListener("mousedown",function(event){if(playground)playground.sandpit.stop();playground=new demos[event.currentTarget.textContent]});div.appendChild(link)});var params=_queryfetch2.default.parse(window.location.search);playground=params.demo?new demos[params.demo]:new(demos[Object.keys(demos)[0]]);document.querySelector(".overlay").appendChild(div);"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _color=require("color");var _color2=_interopRequireDefault(_color);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.default=_color2.default;"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var is=function(){function is(){_classCallCheck(this,is)}_createClass(is,null,[{key:"element",value:function element(object){try{return object instanceof window.HTMLElement}catch(e){return(typeof object==="undefined"?"undefined":_typeof(object))==="object"&&object.nodeType===1&&_typeof(object.style)==="object"&&_typeof(object.ownerDocument)==="object"}}},{key:"array",value:function array(object){return Object.prototype.toString.call(object)==="[object Array]"}}]);return is}();exports.default=is;"use strict";Object.defineProperty(exports,"__esModule",{value:true});var logger={active:false,log:function log(message){logger.print("log",message)},warn:function warn(message){logger.print("warn",message)},error:function error(message){logger.print("error",message)},info:function info(message){logger.print("info",message)},print:function print(type,message){if(logger.active)console[type]("ðŸ‘‰ Sandpit: "+message)}};exports.default=logger;"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _victor=require("victor");var _victor2=_interopRequireDefault(_victor);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}_victor2.default.prototype.setLength=function(scalar){var length=this.length();if(scalar>=0&&length!==0){var sinA=this.y/length;var sinB=this.x/length;this.y=sinA*scalar;this.x=sinB*scalar}return this};_victor2.default.prototype.addLength=function(scalar){return this.setLength(this.length()+scalar)};exports.default=_victor2.default;